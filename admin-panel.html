<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Panel Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-dark bg-dark px-4 d-flex justify-content-between">
  <span class="navbar-brand">SMApp Admin</span>
  <button class="btn btn-outline-light btn-sm" onclick="cerrarSesion()">
    Cerrar sesiÃ³n
  </button>
</nav>


<div class="container mt-4">
<h3>ðŸ“¨ Mensajes Recibidos</h3>

<table class="table table-striped table-bordered mt-3">
<thead class="table-dark">
<tr>
<th>Nombre</th>
<th>Email</th>
<th>Mensaje</th>
<th>Fecha</th>
</tr>
</thead>
<tbody id="tabla"></tbody>
</table>
</div>

<script>
fetch("/admin-mensajes")
.then(res => {
    if(res.status === 401) location.href = "/admin-login.html";
    return res.json();
})
.then(data => {
    data.forEach(m => {
        tabla.innerHTML += `
        <tr>
            <td>${m.nombre}</td>
            <td>${m.email}</td>
            <td>${m.mensaje}</td>
            <td>${m.fecha}</td>
        </tr>`;
    });
});
</script>
<script>
function cerrarSesion() {
    fetch("/admin-logout")
        .then(() => {
            location.href = "/admin-login.html";
        });
}
</script>

</body>
</html>
